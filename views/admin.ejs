<%-include('./partials/header.ejs') -%>


<!--Container Main start-->
  <div id="left">
    <div id="form-wrapper">
      
      
      <form id="taskForm" action="/add-task" method="post"> <!-- onsubmit="addTask()" -->
        <input class="submit-button" type="submit" value="Assign Task">
        <h1>Add Task</h1>
        <h3>Task Description</h3>
        <textarea name="text" placeholder="Write a new task here." required></textarea>
        <div id="form-col-wrapper">
          <div id="form-left">
            <h3>Assigned To</h3>
            <select name="userID" id="person" required> 
              <option value="" selected></option>
              <% userData.forEach(user => { %>
                
                <option data-hidden-value="<%= user.fullname.split(' ')[0] %>" value="<%= user.id %>"> <%= user.fullname.split(' ')[0] %></option>
              <% }); %>
              
            </select>
          </div>
          <div id="form-right">
            <h3>Due Date</h3>
            <input type="date" id="date" name="end_date" value="" min="${new Date().toISOString().split('T')[0]}" required>
          </div>
          <div class="form-footer"></div>
        </div>
      </form>
      
    </div>
  </div>
  
  <div id="right">
    <div id="right-wrapper">
      <h2>Task Assigned</h2>
      <table id="table-container">
        <thead>
          <tr>
            <th>Name</th>
            <th>Due Date</th>
            <th>Task</th>
            </tr>
          </thead>
      
      <div id="">
        
        <tbody>
        <% userTaskz.forEach(task => { %>

          <!-- let date = moment(task.end_date).format('YYYY-MM-DD'); -->

        <td class="person"><%= task.userID %></td>
        <td class="task-date"><%= task.end_date %></td>
       <td class="task-descrip"> <%= task.text %></td>
        
        <% }) %>
      </tbody>
      </div>
    </table>
    </div>
  </div>

  <div id="chart-wrapper">
    <div id="chart_div" class="chart">
      
      <%- include('./table' , { userData: userData }) %>


    </div>
  `</div>

   <!--Container Main end-->
    <!-- <footer>
      <p>&copy; 2023 TaskMaster</p>
    </footer> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="js/admin.js" ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

  </body>
</html>




